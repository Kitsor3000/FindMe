{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-center align-items-center">
  <div class="col-lg-7 col-md-9">
    <div class="card p-4 shadow-lg rounded-4 border-0 form-card mb-5">
      <h2 class="mb-4 text-center fw-bold text-primary">–î–æ–¥–∞—Ç–∏ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è</h2>

      <form method="post" enctype="multipart/form-data" class="needs-validation" novalidate>
        {% csrf_token %}

        <!-- –ü–Ü–ë -->
        <div class="form-group mb-3">
          <label class="form-label fw-semibold">–ü–Ü–ë –∑–Ω–∏–∫–ª–æ—ó –æ—Å–æ–±–∏</label>
          {{ form.full_name }}
        </div>

        <!-- –†–µ–≥—ñ–æ–Ω -->
        <div class="form-group mb-3">
          <label class="form-label fw-semibold">–†–µ–≥—ñ–æ–Ω</label>
          {{ form.region }}
        </div>

        <!-- –ú—ñ—Å—Ç–æ -->
        <div class="form-group mb-3">
          <label class="form-label fw-semibold">–ú—ñ—Å—Ç–æ</label>
          {{ form.city }}
        </div>

        <!-- –î–∞—Ç–∞ –∑–Ω–∏–∫–Ω–µ–Ω–Ω—è -->
        <div class="form-group mb-3">
          <label class="form-label fw-semibold">–î–∞—Ç–∞ –∑–Ω–∏–∫–Ω–µ–Ω–Ω—è</label>
          {{ form.missing_date }}
        </div>

        <div class="form-group mb-3">
  <label class="form-label fw-semibold">–ö–∞—Ç–µ–≥–æ—Ä—ñ—è</label>
  {{ form.category }}
</div>

<div class="form-group mb-3">
  <label class="form-label fw-semibold">–°—Ç–∞—Ç—É—Å</label>
  {{ form.status }}
</div>


        <!-- –§–æ—Ç–æ -->
        <div class="form-group mb-3">
          <label class="form-label fw-semibold">–§–æ—Ç–æ</label>
          {{ form.photo }}
        </div>

        <!-- –ú—ñ—Å—Ü–µ –Ω–∞ –∫–∞—Ä—Ç—ñ -->
        <div class="form-group mb-3">
          <label class="form-label fw-semibold">–û—Å—Ç–∞–Ω–Ω—î –º—ñ—Å—Ü–µ, –¥–µ –±–∞—á–∏–ª–∏</label>
          {{ form.location }}
        </div>

        <!-- üó∫Ô∏è –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞ –º–∞–ø–∞ -->
        <div class="form-group mb-4">
          <label class="form-label fw-semibold">–û–±–µ—Ä—ñ—Ç—å –º—ñ—Å—Ü–µ –Ω–∞ –º–∞–ø—ñ</label>
          <div id="map" style="height: 300px; border-radius: 12px;"></div>
          {{ form.latitude }}
          {{ form.longitude }}
        </div>

        <!-- –û–ø–∏—Å -->
        <div class="form-group mb-4">
          <label class="form-label fw-semibold">–û–ø–∏—Å</label>
          {{ form.description }}
        </div>

        <!-- –ö–Ω–æ–ø–∫–∞ -->
        <button type="submit" class="btn btn-primary w-100 py-2 rounded-3 fw-semibold shadow-sm">
          <i class="bi bi-plus-circle me-1"></i> –ó–±–µ—Ä–µ–≥—Ç–∏
        </button>
      </form>
    </div>
  </div>
</div>

<!-- üó∫Ô∏è Leaflet -->
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
  const map = L.map('map').setView([49.9935, 36.2304], 6); // –¶–µ–Ω—Ç—Ä –£–∫—Ä–∞—ó–Ω–∏
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  let marker;
  map.on('click', function(e) {
    const { lat, lng } = e.latlng;
    if (marker) map.removeLayer(marker);
    marker = L.marker([lat, lng]).addTo(map);
    document.getElementById('id_latitude').value = lat;
    document.getElementById('id_longitude').value = lng;
  });
});
</script>

<style>
  /* üé® –ë–∞–∑–æ–≤—ñ –∫–æ–ª—å–æ—Ä–∏ (—Å–≤—ñ—Ç–ª–∞ —Ç–µ–º–∞) */
  :root {
    --bg-color: #ffffff;
    --label-text-color: #212529;     
  --input-text-color: #212529;
    --input-bg: #f8f9fa;
    --input-border: rgba(180,180,180,0.4);
    --card-bg: #ffffff;
  }

  /* üåô –¢–µ–º–Ω–∞ —Ç–µ–º–∞ */
  [data-theme='dark'] {
    --bg-color: #121212;
     --label-text-color: #823232;
  --input-text-color: #030303;
    --input-bg: #989898;
    --input-border: #444;
    --card-bg: #202845;
  }

  /* –û—Å–Ω–æ–≤–Ω–∞ —Ñ–æ—Ä–º–∞ */
  .form-card {
    background: var(--card-bg);
    transition: all 0.3s ease;
    color: var(--text-color);
  }

  .form-label {
    color: var(--text-color);
  }

  input[type="text"],
  input[type="date"],
  input[type="file"],
  textarea {
    width: 100%;
    border: 1px solid var(--input-border);
    border-radius: 0.6rem;
    padding: 10px 14px;
    background-color: var(--input-bg);
    color: var(--text-color);
    transition: border-color 0.2s ease, box-shadow 0.2s ease, background-color 0.3s ease;
  }

  input:focus,
  textarea:focus {
    border-color: #0d6efd;
    box-shadow: 0 0 6px rgba(13,110,253,0.3);
    outline: none;
  }

  button.btn-primary {
    background: linear-gradient(135deg, #0d6efd, #007bff);
    border: none;
    transition: all 0.25s ease;
  }

  button.btn-primary:hover {
    background: linear-gradient(135deg, #007bff, #0056d2);
    transform: scale(1.02);
  }

  footer {
    margin-top: 30px !important;
  }
</style>

{% endblock %}
